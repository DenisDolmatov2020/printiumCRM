import{W as he,t as ie,j as ye,Z as Oe,_ as Le,E as G,H as De,R as Me,c as Ve,n as j,f as ze,F as Ue,U as ge,$ as me,A as Te}from"./el-button.45Eq8tZY.js";import{bh as He,ao as ne,aB as re,s as Ie,U as X,a4 as ue,A as O,a7 as de,Q as J,r as T,h as M,ae as be,o as p,c as C,Y as Ce,z as B,$ as Ee,m as Q,W as K,O as ve,ay as Ye,b as d,ag as Ke,X as ce,ap as pe,as as Ze,aq as Ge,af as je,E as qe,v as We,I as Xe,ai as Je,H as Qe,a1 as Fe,aw as et,Z as oe,w as U,F as H,a8 as tt,D as q,a as x,t as I,_ as at,az as st,d as Y}from"./entry.Tqj8lCA3.js";import{_ as Ne}from"./plugin-vue_export-helper._h7skemH.js";const Yt=(e="")=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),D=e=>He(e);var nt=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(nt||{});const W=e=>{const o=ne(e)?e:[e],l=[];return o.forEach(s=>{var r;ne(s)?l.push(...W(s)):re(s)&&ne(s.children)?l.push(...W(s.children)):(l.push(s),re(s)&&((r=s.component)!=null&&r.subTree)&&l.push(...W(s.component.subTree)))}),l},ot=(e,o,l)=>W(e.subTree).filter(t=>{var a;return re(t)&&((a=t.type)==null?void 0:a.name)===o&&!!t.component}).map(t=>t.component.uid).map(t=>l[t]).filter(t=>!!t),lt=(e,o)=>{const l={},s=Ie([]);return{children:s,addChild:a=>{l[a.uid]=a,s.value=ot(e,o,l)},removeChild:a=>{delete l[a],s.value=s.value.filter(i=>i.uid!==a)}}},F=Symbol("tabsRootContextKey"),rt=X({tabs:{type:ue(Array),default:()=>he([])}}),we="ElTabBar",ct=O({name:we}),it=O({...ct,props:rt,setup(e,{expose:o}){const l=e,s=Q(),r=de(F);r||ie(we,"<el-tabs><el-tab-bar /></el-tabs>");const t=J("tabs"),a=T(),i=T(),n=()=>{let h=0,y=0;const f=["top","bottom"].includes(r.props.tabPosition)?"width":"height",b=f==="width"?"x":"y",L=b==="x"?"left":"top";return l.tabs.every(P=>{var c,R;const N=(R=(c=s.parent)==null?void 0:c.refs)==null?void 0:R[`tab-${P.uid}`];if(!N)return!1;if(!P.active)return!0;h=N[`offset${D(L)}`],y=N[`client${D(f)}`];const A=window.getComputedStyle(N);return f==="width"&&(l.tabs.length>1&&(y-=Number.parseFloat(A.paddingLeft)+Number.parseFloat(A.paddingRight)),h+=Number.parseFloat(A.paddingLeft)),!1}),{[f]:`${y}px`,transform:`translate${D(b)}(${h}px)`}},_=()=>i.value=n();return M(()=>l.tabs,async()=>{await be(),_()},{immediate:!0}),ye(a,()=>_()),o({ref:a,update:_}),(h,y)=>(p(),C("div",{ref_key:"barRef",ref:a,class:Ce([B(t).e("active-bar"),B(t).is(B(r).props.tabPosition)]),style:Ee(i.value)},null,6))}});var ut=Ne(it,[["__file","tab-bar.vue"]]);const dt=X({panes:{type:ue(Array),default:()=>he([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),bt={tabClick:(e,o,l)=>l instanceof Event,tabRemove:(e,o)=>o instanceof Event},_e="ElTabNav",vt=O({name:_e,props:dt,emits:bt,setup(e,{expose:o,emit:l}){const s=Q(),r=de(F);r||ie(_e,"<el-tabs><tab-nav /></el-tabs>");const t=J("tabs"),a=Oe(),i=Le(),n=T(),_=T(),h=T(),y=T(),f=T(!1),b=T(0),L=T(!1),P=T(!0),c=K(()=>["top","bottom"].includes(r.props.tabPosition)?"width":"height"),R=K(()=>({transform:`translate${c.value==="width"?"X":"Y"}(-${b.value}px)`})),N=()=>{if(!n.value)return;const v=n.value[`offset${D(c.value)}`],m=b.value;if(!m)return;const u=m>v?m-v:0;b.value=u},A=()=>{if(!n.value||!_.value)return;const v=_.value[`offset${D(c.value)}`],m=n.value[`offset${D(c.value)}`],u=b.value;if(v-u<=m)return;const w=v-u>m*2?u+m:v-m;b.value=w},V=async()=>{const v=_.value;if(!f.value||!h.value||!n.value||!v)return;await be();const m=h.value.querySelector(".is-active");if(!m)return;const u=n.value,w=["top","bottom"].includes(r.props.tabPosition),S=m.getBoundingClientRect(),E=u.getBoundingClientRect(),k=w?v.offsetWidth-E.width:v.offsetHeight-E.height,$=b.value;let g=$;w?(S.left<E.left&&(g=$-(E.left-S.left)),S.right>E.right&&(g=$+S.right-E.right)):(S.top<E.top&&(g=$-(E.top-S.top)),S.bottom>E.bottom&&(g=$+(S.bottom-E.bottom))),g=Math.max(g,0),b.value=Math.min(g,k)},Z=()=>{var v;if(!_.value||!n.value)return;e.stretch&&((v=y.value)==null||v.update());const m=_.value[`offset${D(c.value)}`],u=n.value[`offset${D(c.value)}`],w=b.value;u<m?(f.value=f.value||{},f.value.prev=w,f.value.next=w+u<m,m-w<u&&(b.value=m-u)):(f.value=!1,w>0&&(b.value=0))},Ae=v=>{const m=v.code,{up:u,down:w,left:S,right:E}=j;if(![u,w,S,E].includes(m))return;const k=Array.from(v.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),$=k.indexOf(v.target);let g;m===S||m===u?$===0?g=k.length-1:g=$-1:$<k.length-1?g=$+1:g=0,k[g].focus({preventScroll:!0}),k[g].click(),fe()},fe=()=>{P.value&&(L.value=!0)},ee=()=>L.value=!1;return M(a,v=>{v==="hidden"?P.value=!1:v==="visible"&&setTimeout(()=>P.value=!0,50)}),M(i,v=>{v?setTimeout(()=>P.value=!0,50):P.value=!1}),ye(h,Z),ve(()=>setTimeout(()=>V(),0)),Ye(()=>Z()),o({scrollToActiveTab:V,removeFocus:ee}),M(()=>e.panes,()=>s.update(),{flush:"post",deep:!0}),()=>{const v=f.value?[d("span",{class:[t.e("nav-prev"),t.is("disabled",!f.value.prev)],onClick:N},[d(G,null,{default:()=>[d(De,null,null)]})]),d("span",{class:[t.e("nav-next"),t.is("disabled",!f.value.next)],onClick:A},[d(G,null,{default:()=>[d(Me,null,null)]})])]:null,m=e.panes.map((u,w)=>{var S,E,k,$;const g=u.uid,te=u.props.disabled,ae=(E=(S=u.props.name)!=null?S:u.index)!=null?E:`${w}`,se=!te&&(u.isClosable||e.editable);u.index=`${w}`;const Pe=se?d(G,{class:"is-icon-close",onClick:z=>l("tabRemove",u,z)},{default:()=>[d(Ve,null,null)]}):null,Be=(($=(k=u.slots).label)==null?void 0:$.call(k))||u.props.label,ke=!te&&u.active?0:-1;return d("div",{ref:`tab-${g}`,class:[t.e("item"),t.is(r.props.tabPosition),t.is("active",u.active),t.is("disabled",te),t.is("closable",se),t.is("focus",L.value)],id:`tab-${ae}`,key:`tab-${g}`,"aria-controls":`pane-${ae}`,role:"tab","aria-selected":u.active,tabindex:ke,onFocus:()=>fe(),onBlur:()=>ee(),onClick:z=>{ee(),l("tabClick",u,ae,z)},onKeydown:z=>{se&&(z.code===j.delete||z.code===j.backspace)&&l("tabRemove",u,z)}},[Be,Pe])});return d("div",{ref:h,class:[t.e("nav-wrap"),t.is("scrollable",!!f.value),t.is(r.props.tabPosition)]},[v,d("div",{class:t.e("nav-scroll"),ref:n},[d("div",{class:[t.e("nav"),t.is(r.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(r.props.tabPosition))],ref:_,style:R.value,role:"tablist",onKeydown:Ae},[e.type?null:d(ut,{ref:y,tabs:[...e.panes]},null),m])])])}}}),ft=X({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:ue(Function),default:()=>!0},stretch:Boolean}),le=e=>Ze(e)||Ge(e),mt={[ge]:e=>le(e),tabClick:(e,o)=>o instanceof Event,tabChange:e=>le(e),edit:(e,o)=>["remove","add"].includes(o),tabRemove:e=>le(e),tabAdd:()=>!0},pt=O({name:"ElTabs",props:ft,emits:mt,setup(e,{emit:o,slots:l,expose:s}){var r,t;const a=J("tabs"),{children:i,addChild:n,removeChild:_}=lt(Q(),"ElTabPane"),h=T(),y=T((t=(r=e.modelValue)!=null?r:e.activeName)!=null?t:"0"),f=async(c,R=!1)=>{var N,A,V;if(!(y.value===c||pe(c)))try{await((N=e.beforeLeave)==null?void 0:N.call(e,c,y.value))!==!1&&(y.value=c,R&&(o(ge,c),o("tabChange",c)),(V=(A=h.value)==null?void 0:A.removeFocus)==null||V.call(A))}catch{}},b=(c,R,N)=>{c.props.disabled||(f(R,!0),o("tabClick",c,N))},L=(c,R)=>{c.props.disabled||pe(c.props.name)||(R.stopPropagation(),o("edit",c.props.name,"remove"),o("tabRemove",c.props.name))},P=()=>{o("edit",void 0,"add"),o("tabAdd")};return ze({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},K(()=>!!e.activeName)),M(()=>e.activeName,c=>f(c)),M(()=>e.modelValue,c=>f(c)),M(y,async()=>{var c;await be(),(c=h.value)==null||c.scrollToActiveTab()}),Ke(F,{props:e,currentName:y,registerPane:n,unregisterPane:_}),s({currentName:y}),()=>{const c=l.addIcon,R=e.editable||e.addable?d("span",{class:a.e("new-tab"),tabindex:"0",onClick:P,onKeydown:V=>{V.code===j.enter&&P()}},[c?ce(l,"addIcon"):d(G,{class:a.is("icon-plus")},{default:()=>[d(Ue,null,null)]})]):null,N=d("div",{class:[a.e("header"),a.is(e.tabPosition)]},[R,d(vt,{ref:h,currentName:y.value,editable:e.editable,type:e.type,panes:i.value,stretch:e.stretch,onTabClick:b,onTabRemove:L},null)]),A=d("div",{class:a.e("content")},[ce(l,"default")]);return d("div",{class:[a.b(),a.m(e.tabPosition),{[a.m("card")]:e.type==="card",[a.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[N,A]:[A,N]])}}}),_t=X({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),ht=["id","aria-hidden","aria-labelledby"],Se="ElTabPane",yt=O({name:Se}),gt=O({...yt,props:_t,setup(e){const o=e,l=Q(),s=je(),r=de(F);r||ie(Se,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const t=J("tab-pane"),a=T(),i=K(()=>o.closable||r.props.closable),n=me(()=>{var b;return r.currentName.value===((b=o.name)!=null?b:a.value)}),_=T(n.value),h=K(()=>{var b;return(b=o.name)!=null?b:a.value}),y=me(()=>!o.lazy||_.value||n.value);M(n,b=>{b&&(_.value=!0)});const f=qe({uid:l.uid,slots:s,props:o,paneName:h,active:n,index:a,isClosable:i});return ve(()=>{r.registerPane(f)}),We(()=>{r.unregisterPane(f.uid)}),(b,L)=>B(y)?Xe((p(),C("div",{key:0,id:`pane-${B(h)}`,class:Ce(B(t).b()),role:"tabpanel","aria-hidden":!B(n),"aria-labelledby":`tab-${B(h)}`},[ce(b.$slots,"default")],10,ht)),[[Je,B(n)]]):Qe("v-if",!0)}});var $e=Ne(gt,[["__file","tab-pane.vue"]]);const Tt=Fe(pt,{TabPane:$e}),Ct=et($e),Kt=O({__name:"UITabs",props:{activeTab:{type:String,default:"Детали"},options:{type:Array,default:()=>[{label:"Все"},{label:"Локации",component:null},{label:"Группы",component:null}]}},setup(e){const o=T("Детали"),l=(r,t)=>{console.log(r,t)},s=e;return ve(()=>{o.value=s.activeTab}),(r,t)=>{const a=Ct,i=Tt;return p(),oe(i,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=n=>o.value=n),class:"tabs",onTabClick:l},{default:U(()=>[(p(!0),C(H,null,q(e.options,n=>(p(),oe(a,{key:n.label,label:n.label,name:n.label},{default:U(()=>{var _;return[(p(),oe(tt(n==null?void 0:n.component),{serial:(_=n.info)==null?void 0:_.serial},null,8,["serial"]))]}),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])}}}),Et="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15.8333%2012.5V15.8333H4.16667V12.5H15.8333ZM16.6667%2010.8333H3.33333C2.875%2010.8333%202.5%2011.2083%202.5%2011.6667V16.6667C2.5%2017.125%202.875%2017.5%203.33333%2017.5H16.6667C17.125%2017.5%2017.5%2017.125%2017.5%2016.6667V11.6667C17.5%2011.2083%2017.125%2010.8333%2016.6667%2010.8333ZM5.83333%2015.4167C5.15%2015.4167%204.58333%2014.8583%204.58333%2014.1667C4.58333%2013.475%205.15%2012.9167%205.83333%2012.9167C6.51667%2012.9167%207.08333%2013.475%207.08333%2014.1667C7.08333%2014.8583%206.525%2015.4167%205.83333%2015.4167ZM15.8333%204.16667V7.5H4.16667V4.16667H15.8333ZM16.6667%202.5H3.33333C2.875%202.5%202.5%202.875%202.5%203.33333V8.33333C2.5%208.79167%202.875%209.16667%203.33333%209.16667H16.6667C17.125%209.16667%2017.5%208.79167%2017.5%208.33333V3.33333C17.5%202.875%2017.125%202.5%2016.6667%202.5ZM5.83333%207.08333C5.15%207.08333%204.58333%206.525%204.58333%205.83333C4.58333%205.14167%205.15%204.58333%205.83333%204.58333C6.51667%204.58333%207.08333%205.15%207.08333%205.83333C7.08333%206.51667%206.525%207.08333%205.83333%207.08333Z'%20fill='%23999999'/%3e%3c/svg%3e",Nt=""+new URL("printer-icon.RUgzSCNi.svg",import.meta.url).href,wt={class:"container mt-32"},St={class:"rwd-table"},$t=["id"],xt=["data-th"],Rt={key:0,class:"row"},At={class:"column"},Pt={class:"row justify-between estimate-resources"},Bt={class:"range-container"},kt={class:"px-12"},Ot={key:0,src:Et,alt:"Иконка ДНС"},Lt={key:1,src:Nt,alt:"Иконка принтера"},Dt={key:1},Mt=O({__name:"DeviceTable",props:{headers:{type:Array,default:[{label:"№",value:"id"},{label:"Название (Тип)",value:"name"},{label:"Парт.номер",value:"part_number"},{label:"Оставшийся ресурс",value:"estimated_resource"},{label:"Плановая замена",value:"estimated_prt_replace_date"},{label:"Склад",value:"id"}]},options:{type:Array,default:()=>[]}},setup(e){return(o,l)=>(p(),C("div",wt,[x("table",St,[x("tbody",null,[x("tr",null,[(p(!0),C(H,null,q(e.headers,s=>(p(),C("th",{id:s.value},I(s.label),9,$t))),256))]),(p(!0),C(H,null,q(e.options,(s,r)=>(p(),C("tr",{key:`option_${s.id}`},[(p(!0),C(H,null,q(e.headers,(t,a)=>(p(),C("td",{key:`header_${t.value}`,"data-th":t.value},[t.value==="estimated_resource"?(p(),C("div",Rt,[x("div",At,[x("div",Pt,[x("div",null,I(Math.floor(s.estimated_resource/s.resource_pages))+" % ",1),x("div",null,I(s.estimated_resource)+" / "+I(s.resource_pages),1)]),x("div",Bt,[x("div",{class:"custom-range",style:Ee({width:`${s.estimated_resource/s.resource_pages}%`})},null,4)])]),x("div",kt,[s.source?(p(),C("img",Ot)):(p(),C("img",Lt))])])):(p(),C("span",Dt,I(a?s[t.value]:r+1),1))],8,xt))),128))]))),128))])])]))}}),xe=at(Mt,[["__scopeId","data-v-0078408a"]]),Re=()=>{const e=st();return{getParts:async a=>{let i=`${e.public.baseURL}/app/parts_printer/${a}/`;const n={method:"get",credentials:"include"};return await $fetch(i,n)},getParams:async a=>{let i=`${e.public.baseURL}/app/get_printer_snmp_params/${a}/`;const n={method:"get",credentials:"include"};return await $fetch(i,n)},getSettings:async a=>{let i=`${e.public.baseURL}/app/settingsget/?lk_section_name=${a}`;const n={method:"get",credentials:"include"};return await $fetch(i,n)},fetchParams:async()=>{let a=`${e.public.baseURL}/api/admin/report/device/attrs/`;const i={method:"get",credentials:"include"};return await $fetch(a,i)},setParams:async a=>{try{const i=`${e.public.baseURL}/app/settingssave/`,n={method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"},credentials:"include"};return await $fetch(i,n)}catch(i){throw console.error("Error during POST request:",i),i}}}},Vt={class:"right-buttons mt-16"},Zt=O({__name:"DeviceDetail",props:{serial:{type:String,default:""}},setup(e){const o=e,l=T([]),s=Re();return(async()=>{const t=await s.getParts(o.serial);l.value=t.parts})(),(t,a)=>{const i=Te,n=xe;return p(),C(H,null,[x("div",Vt,[d(i,{class:"el-button__outline"},{default:U(()=>[Y(" Загрузить запчасти ")]),_:1}),d(i,{class:"el-button__outline"},{default:U(()=>[Y(" Обновить ")]),_:1})]),d(n,{options:B(l),class:"mt-24"},null,8,["options"])],64)}}}),zt={class:"row justify-between right-buttons mt-16"},Gt=O({__name:"DeviceParams",props:{serial:{type:String,default:""}},setup(e){const o=e,l=T([]),s=Re();return(async()=>{const t=await s.getParams(o.serial);l.value=t.device_parameters})(),(t,a)=>{const i=Te,n=xe;return p(),C(H,null,[x("div",zt,[x("div",null,[d(i,{class:"el-button__outline"},{default:U(()=>[Y(" Excel ")]),_:1}),d(i,{class:"el-button__outline"},{default:U(()=>[Y(" Обновить ")]),_:1})]),d(i,{class:"el-button__outline"},{default:U(()=>[Y(" SNMP ")]),_:1})]),d(n,{headers:[{label:"№",value:"oid"},{label:"Название параметра",value:"name"},{label:"Значения",value:"value"}],options:B(l),class:"mt-24"},null,8,["options"])],64)}}}),jt="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Essentials/close%20cross'%3e%3cpath%20id='Icon'%20d='M15%205L5%2015M15%2015L5%205.00001'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/g%3e%3c/svg%3e";export{nt as P,Kt as _,Zt as a,Gt as b,jt as c,Yt as e,Re as u};
